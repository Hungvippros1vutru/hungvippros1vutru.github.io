<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>GaaraChillChill</title>

<style>
body{
  margin:0;
  height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
  background:url("background.jpg") center/cover no-repeat fixed;
  font-family:system-ui;
}

.player{
  width:260px;
  backdrop-filter:blur(20px);
  background:rgba(255,255,255,0.15);
  border-radius:24px;
  padding:20px;
  text-align:center;
  color:white;
  box-shadow:0 20px 60px rgba(0,0,0,.4);
}

.disk{
  width:120px;
  height:120px;
  border-radius:50%;
  margin:auto;
  background:url("background.jpg") center/cover;
  animation:spin 6s linear infinite;
  animation-play-state:paused;
}

@keyframes spin{
  from{transform:rotate(0)}
  to{transform:rotate(360deg)}
}

.controls{
  margin-top:12px;
}

button{
  padding:6px 10px;
  margin:4px;
  border:none;
  border-radius:8px;
  cursor:pointer;
}

.progress{
  width:100%;
}

.time{
  font-size:12px;
  opacity:.8;
  margin-top:4px;
}
</style>
</head>

<body>

<div class="player">
  <div class="disk" id="disk"></div>

  <input type="range" id="progress" class="progress" value="0">

  <div class="time">
    <span id="current">0:00</span> /
    <span id="duration">0:00</span>
  </div>

  <div class="controls">
    <button id="prev">‚èÆ</button>
    <button id="play">‚ñ∂</button>
    <button id="next">‚è≠</button>
  </div>
</div>

<audio id="audio"></audio>

<script>
const audio = document.getElementById("audio")
const playBtn = document.getElementById("play")
const disk = document.getElementById("disk")
const progress = document.getElementById("progress")
const current = document.getElementById("current")
const duration = document.getElementById("duration")

// üî• auto load mp3 trong repo
const songs = [
  "song1.mp3",
  "song2.mp3",
  "song3.mp3",
  "song4.mp3",
  "Figure.09.mp3"
]

let index = 0
let isPlaying = false

function loadSong(){
  audio.src = songs[index]
}
loadSong()

// ‚ñ∂ PLAY / PAUSE
playBtn.onclick = async () => {
  if(!isPlaying){
    try{
      await audio.play()
      isPlaying = true
      playBtn.textContent = "‚è∏"
      disk.style.animationPlayState = "running"
    }catch(e){
      console.log("Play l·ªói:", e)
    }
  }else{
    audio.pause()
    isPlaying = false
    playBtn.textContent = "‚ñ∂"
    disk.style.animationPlayState = "paused"
  }
}

// ‚è≠ NEXT
document.getElementById("next").onclick = () => {
  index = (index + 1) % songs.length
  loadSong()
  audio.play()
}

// ‚èÆ PREV
document.getElementById("prev").onclick = () => {
  index = (index - 1 + songs.length) % songs.length
  loadSong()
  audio.play()
}

// üìä c·∫≠p nh·∫≠t progress
audio.addEventListener("timeupdate", () => {
  if(audio.duration){
    progress.value = (audio.currentTime / audio.duration) * 100
    current.textContent = formatTime(audio.currentTime)
    duration.textContent = formatTime(audio.duration)
  }
})

// k√©o thanh
progress.oninput = () => {
  if(audio.duration){
    audio.currentTime = (progress.value/100) * audio.duration
  }
}

// format time
function formatTime(t){
  const m = Math.floor(t/60)
  const s = Math.floor(t%60).toString().padStart(2,"0")
  return m + ":" + s
}
</script>

</body>
</html>
