<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>üéß Web nghe nh·∫°c</title>

<style>
body{
  margin:0;
  font-family:Arial;
  background:url("background.jpg") no-repeat center/cover;
  color:white;
  text-align:center;
}

.player-box{
  margin-top:100px;
  background:rgba(0,0,0,0.5);
  display:inline-block;
  padding:25px;
  border-radius:20px;
}
button{
  padding:8px 14px;
  margin:5px;
  border:none;
  border-radius:8px;
  cursor:pointer;
}
</style>
</head>

<body>

<div class="player-box">
  <h2 id="songName">ƒêang t·∫£i nh·∫°c...</h2>

  <audio id="player"></audio><br>

  <button onclick="prevSong()">‚èÆ</button>
  <button onclick="player.play()">‚ñ∂</button>
  <button onclick="player.pause()">‚è∏</button>
  <button onclick="nextSong()">‚è≠</button>
</div>

<script>
// ====== CONFIG ======
const USERNAME = "hungvippros1vutru"; // ‚Üê s·ª≠a n·∫øu c·∫ßn
const REPO = "hungvippros1vutru.github.io"; // ‚Üê s·ª≠a n·∫øu c·∫ßn

// ====== BI·∫æN ======
const player = document.getElementById("player");
const songName = document.getElementById("songName");

let playlist = [];
let index = 0;

// ====== LOAD MP3 T·ª™ GITHUB ======
async function loadFromGitHub(){
  try{
    const res = await fetch(
      `https://api.github.com/repos/${USERNAME}/${REPO}/contents/`
    );
    const data = await res.json();

    playlist = data
      .filter(f => f.name.endsWith(".mp3"))
      .map(f => f.download_url);

    if(playlist.length === 0){
      songName.innerText = "‚ùå Kh√¥ng t√¨m th·∫•y mp3";
      return;
    }

    loadSong(0);

  }catch(err){
    songName.innerText = "‚ùå L·ªói load nh·∫°c";
    console.error(err);
  }
}

// ====== LOAD B√ÄI ======
function loadSong(i){
  index = i;
  player.src = playlist[index];
  updateName();
  player.play();
}

function updateName(){
  const name = playlist[index].split("/").pop();
  songName.innerText = "üéµ " + name;
}

function nextSong(){
  index = (index + 1) % playlist.length;
  loadSong(index);
}

function prevSong(){
  index = (index - 1 + playlist.length) % playlist.length;
  loadSong(index);
}

player.addEventListener("ended", nextSong);

// ====== CH·∫†Y ======
loadFromGitHub();
</script>

</body>
</html>
