<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>üéß Gaara B√£o C√°t </title>

<style>
*{box-sizing:border-box;margin:0;padding:0;font-family:Arial}

/* ===== BACKGROUND ===== */
body{
  min-height:100vh;
  background:url("background.jpg") no-repeat center center fixed;
  background-size:cover;
  display:flex;
  align-items:center;
  justify-content:center;
  color:white;
  overflow:hidden;
}

/* blur overlay */
body::before{
  content:"";
  position:fixed;
  inset:0;
  backdrop-filter: blur(12px);
  background:rgba(0,0,0,.35);
}

/* ===== PLAYER ===== */
.player-box{
  position:relative;
  z-index:1;
  width:340px;
  padding:25px;
  border-radius:22px;
  background:rgba(255,255,255,.08);
  backdrop-filter:blur(25px);
  box-shadow:0 0 60px rgba(0,255,213,.25);
  text-align:center;
}

/* ===== DISC ===== */
.disc{
  width:120px;
  height:120px;
  margin:10px auto;
  border-radius:50%;
  background:url("background.jpg") center/cover;
  box-shadow:0 0 25px rgba(0,255,213,.6);
  animation:spin 5s linear infinite;
  animation-play-state:paused;
}

.disc.playing{
  animation-play-state:running;
}

@keyframes spin{
  from{transform:rotate(0)}
  to{transform:rotate(360deg)}
}

/* ===== TEXT ===== */
h1{font-size:20px}
#songName{margin:10px;color:#00ffd5;font-weight:bold}

/* ===== BUTTON ===== */
.controls button{
  padding:8px 12px;
  margin:4px;
  border:none;
  border-radius:8px;
  cursor:pointer;
  background:#ffffff20;
  color:white;
  transition:.2s;
}

.controls button:hover{
  background:#00ffd580;
  transform:scale(1.1);
}

/* ===== PROGRESS ===== */
.progress{width:100%;margin:10px 0}

/* ===== PLAYLIST ===== */
.playlist{
  text-align:left;
  max-height:130px;
  overflow:auto;
  margin-top:10px;
  font-size:14px;
}

.playlist div{
  padding:4px;
  cursor:pointer;
  border-radius:6px;
}

.playlist div:hover{background:#ffffff20}
.active{color:#00ffd5}

/* ===== VISUALIZER ===== */
canvas{
  width:100%;
  height:60px;
  margin-top:10px;
}

/* ===== MOBILE ===== */
@media(max-width:480px){
  .player-box{width:92%}
}
</style>
</head>

<body>

<div class="player-box">
  <h1>üéß Hung Music Player</h1>

  <div class="disc" id="disc"></div>

  <div id="songName">Loading...</div>

  <audio id="player"></audio>
  <canvas id="visualizer"></canvas>

  <input type="range" id="progressBar" class="progress" value="0">

  <div class="controls">
    <button onclick="prevSong()">‚èÆ</button>
    <button onclick="togglePlay()">‚ñ∂Ô∏è</button>
    <button onclick="nextSong()">‚è≠</button>
    <button onclick="toggleShuffle()">üîÄ</button>
    <button onclick="toggleRepeat()">üîÅ</button>
  </div>

  üîä <input type="range" min="0" max="1" step="0.01"
      onchange="player.volume=this.value" value="1">

  <div id="playlistBox" class="playlist"></div>
</div>

<script>
/* ===== TITLE CH·∫†Y ===== */
let titleText=" üéß Hung Music Player ";
setInterval(()=>{
  document.title=titleText;
  titleText=titleText.substring(1)+titleText[0];
},200);

/* ===== BI·∫æN ===== */
const player=document.getElementById("player");
const songName=document.getElementById("songName");
const progressBar=document.getElementById("progressBar");
const playlistBox=document.getElementById("playlistBox");
const disc=document.getElementById("disc");

/* ===== PLAYLIST (ch·ªâ th√™m mp3 v√†o ƒë√¢y) ===== */
let playlist=[
  "song1.mp3",
  "song2.mp3",
  "song3.mp3",
  "song4.mp3",
  "Figure.09.mp3"
];

let index=0;
let isShuffle=false;
let isRepeat=false;

/* ===== LOAD ===== */
function loadSong(i){
  index=i;
  player.src=playlist[index];
  player.play();
  updateName();
  renderPlaylist();
  disc.classList.add("playing");
}

function updateName(){
  songName.innerText="üéµ "+playlist[index];
}

/* ===== PLAY ===== */
function togglePlay(){
  if(player.paused){
    player.play();
    disc.classList.add("playing");
  }else{
    player.pause();
    disc.classList.remove("playing");
  }
}

/* ===== NEXT ===== */
function nextSong(){
  if(isShuffle){
    index=Math.floor(Math.random()*playlist.length);
  }else{
    index=(index+1)%playlist.length;
  }
  loadSong(index);
}

/* ===== PREV ===== */
function prevSong(){
  index=(index-1+playlist.length)%playlist.length;
  loadSong(index);
}

/* ===== SHUFFLE ===== */
function toggleShuffle(){
  isShuffle=!isShuffle;
}

/* ===== REPEAT ===== */
function toggleRepeat(){
  isRepeat=!isRepeat;
  player.loop=isRepeat;
}

/* ===== PROGRESS ===== */
player.ontimeupdate=()=>{
  progressBar.value=(player.currentTime/player.duration)*100||0;
};

progressBar.oninput=()=>{
  player.currentTime=(progressBar.value/100)*player.duration;
};

/* ===== PLAYLIST UI ===== */
function renderPlaylist(){
  playlistBox.innerHTML="";
  playlist.forEach((song,i)=>{
    const div=document.createElement("div");
    div.textContent=song;
    if(i===index) div.classList.add("active");
    div.onclick=()=>loadSong(i);
    playlistBox.appendChild(div);
  });
}

/* ===== AUTO NEXT ===== */
player.onended=()=>{
  if(!isRepeat) nextSong();
};

/* ===== VISUALIZER ===== */
const ctxAudio=new AudioContext();
const analyser=ctxAudio.createAnalyser();
const src=ctxAudio.createMediaElementSource(player);
src.connect(analyser);
analyser.connect(ctxAudio.destination);

const canvas=document.getElementById("visualizer");
const ctx=canvas.getContext("2d");
analyser.fftSize=64;
const bufferLength=analyser.frequencyBinCount;
const dataArray=new Uint8Array(bufferLength);

function draw(){
  requestAnimationFrame(draw);
  analyser.getByteFrequencyData(dataArray);

  ctx.clearRect(0,0,canvas.width,canvas.height);

  let barWidth=(canvas.width/bufferLength)*1.5;
  let x=0;

  for(let i=0;i<bufferLength;i++){
    let barHeight=dataArray[i]/2;
    ctx.fillStyle="rgb(0,255,213)";
    ctx.fillRect(x,canvas.height-barHeight,barWidth,barHeight);
    x+=barWidth+2;
  }
}
draw();

/* ===== START ===== */
loadSong(0);
</script>

</body>
</html>
